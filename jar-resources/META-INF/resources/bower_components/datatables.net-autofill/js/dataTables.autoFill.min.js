/*! AutoFill 2.3.1
 * Â©2008-2018 SpryMedia Ltd - datatables.net/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(b){return a(b,window,document)})}else{if(typeof exports==="object"){module.exports=function(b,c){if(!b){b=window}if(!c||!c.fn.dataTable){c=require("datatables.net")(b,c).$}return a(c,b,b.document)}}else{a(jQuery,window,document)}}}(function(g,e,a,h){var f=g.fn.dataTable;var c=0;var d=function(j,i){if(!f.versionCheck||!f.versionCheck("1.10.8")){throw ("Warning: AutoFill requires DataTables 1.10.8 or greater")}this.c=g.extend(true,{},f.defaults.autoFill,d.defaults,i);this.s={dt:new f.Api(j),namespace:".autoFill"+(c++),scroll:{},scrollInterval:null,handle:{height:0,width:0},enabled:false};this.dom={handle:g('<div class="dt-autofill-handle"/>'),select:{top:g('<div class="dt-autofill-select top"/>'),right:g('<div class="dt-autofill-select right"/>'),bottom:g('<div class="dt-autofill-select bottom"/>'),left:g('<div class="dt-autofill-select left"/>')},background:g('<div class="dt-autofill-background"/>'),list:g('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/></div>"),dtScroll:null,offsetParent:null};this._constructor()};g.extend(d.prototype,{enabled:function(){return this.s.enabled},enable:function(i){var j=this;if(i===false){return this.disable()}this.s.enabled=true;this._focusListener();this.dom.handle.on("mousedown",function(k){j._mousedown(k);return false});return this},disable:function(){this.s.enabled=false;this._focusListenerRemove();return this},_constructor:function(){var k=this;var j=this.s.dt;var i=g("div.dataTables_scrollBody",this.s.dt.table().container());j.settings()[0].autoFill=this;if(i.length){this.dom.dtScroll=i;if(i.css("position")==="static"){i.css("position","relative")}}if(this.c.enable!==false){this.enable()}j.on("destroy.autoFill",function(){k._focusListenerRemove()})},_attach:function(l){var k=this.s.dt;var i=k.cell(l).index();var m=this.dom.handle;var j=this.s.handle;if(!i||k.columns(this.c.columns).indexes().indexOf(i.column)===-1){this._detach();return}if(!this.dom.offsetParent){this.dom.offsetParent=g(k.table().node()).offsetParent()}if(!j.height||!j.width){m.appendTo("body");j.height=m.outerHeight();j.width=m.outerWidth()}var n=this._getPosition(l,this.dom.offsetParent);this.dom.attachedTo=l;m.css({top:n.top+l.offsetHeight-j.height,left:n.left+l.offsetWidth-j.width}).appendTo(this.dom.offsetParent)},_actionSelector:function(j){var l=this;var k=this.s.dt;var o=d.actions;var n=[];g.each(o,function(p,q){if(q.available(k,j)){n.push(p)}});if(n.length===1&&this.c.alwaysAsk===false){var i=o[n[0]].execute(k,j);this._update(i,j)}else{var m=this.dom.list.children("ul").empty();n.push("cancel");g.each(n,function(q,p){m.append(g("<li/>").append('<div class="dt-autofill-question">'+o[p].option(k,j)+"<div>").append(g('<div class="dt-autofill-button">').append(g('<button class="'+d.classes.btn+'">'+k.i18n("autoFill.button","&gt;")+"</button>").on("click",function(){var r=o[p].execute(k,j,g(this).closest("li"));l._update(r,j);l.dom.background.remove();l.dom.list.remove()}))))});this.dom.background.appendTo("body");this.dom.list.appendTo("body");this.dom.list.css("margin-top",this.dom.list.outerHeight()/2*-1)}},_detach:function(){this.dom.attachedTo=null;this.dom.handle.detach()},_drawSelection:function(q,r){var m=this.s.dt;var k=this.s.start;var u=g(this.dom.start);var p={row:this.c.vertical?m.rows({page:"current"}).nodes().indexOf(q.parentNode):k.row,column:this.c.horizontal?g(q).index():k.column};var o=m.column.index("toData",p.column);var l=g(m.cell(":eq("+p.row+")",o).node());if(!m.cell(l).any()){return}if(m.columns(this.c.columns).indexes().indexOf(o)===-1){return}this.s.end=p;var s,i,n,v,w,j;s=k.row<p.row?u:l;i=k.row<p.row?l:u;n=k.column<p.column?u:l;v=k.column<p.column?l:u;s=this._getPosition(s).top;n=this._getPosition(n).left;w=this._getPosition(i).top+i.outerHeight()-s;j=this._getPosition(v).left+v.outerWidth()-n;var t=this.dom.select;t.top.css({top:s,left:n,width:j});t.left.css({top:s,left:n,height:w});t.bottom.css({top:s+w,left:n,width:j});t.right.css({top:s,left:n+j,height:w})},_editor:function(p){var v=this.s.dt;var q=this.c.editor;if(!q){return}var u={};var y=[];var x=q.fields();for(var C=0,n=p.length;C<n;C++){for(var B=0,z=p[C].length;B<z;B++){var l=p[C][B];var s=v.settings()[0].aoColumns[l.index.column];var o=s.editField;if(o===h){var t=s.mData;for(var A=0,r=x.length;A<r;A++){var m=q.field(x[A]);if(m.dataSrc()===t){o=m.name();break}}}if(!o){throw"Could not automatically determine field data. Please see https://datatables.net/tn/11"}if(!u[o]){u[o]={}}var w=v.row(l.index.row).id();u[o][w]=l.set;y.push(l.index)}}q.bubble(y,false).multiSet(u).submit()},_emitEvent:function(j,i){this.s.dt.iterator("table",function(k,l){g(k.nTable).triggerHandler(j+".dt",i)})},_focusListener:function(){var l=this;var k=this.s.dt;var j=this.s.namespace;var i=this.c.focus!==null?this.c.focus:k.init().keys||k.settings()[0].keytable?"focus":"hover";if(i==="focus"){k.on("key-focus.autoFill",function(o,n,m){l._attach(m.node())}).on("key-blur.autoFill",function(o,n,m){l._detach()})}else{if(i==="click"){g(k.table().body()).on("click"+j,"td, th",function(m){l._attach(this)});g(a.body).on("click"+j,function(m){if(!g(m.target).parents().filter(k.table().body()).length){l._detach()}})}else{g(k.table().body()).on("mouseenter"+j,"td, th",function(m){l._attach(this)}).on("mouseleave"+j,function(m){if(g(m.relatedTarget).hasClass("dt-autofill-handle")){return}l._detach()})}}},_focusListenerRemove:function(){var i=this.s.dt;i.off(".autoFill");g(i.table().body()).off(this.s.namespace);g(a.body).off(this.s.namespace)},_getPosition:function(l,k){var j=g(l),o,i,n=0,m=0;if(!k){k=g(g(this.s.dt.table().node())[0].offsetParent)}do{i=j.position();o=g(j[0].offsetParent);n+=i.top+o.scrollTop();m+=i.left+o.scrollLeft();n+=parseInt(o.css("margin-top"))*1;n+=parseInt(o.css("border-top-width"))*1;if(j.get(0).nodeName.toLowerCase()==="body"){break}j=o}while(o.get(0)!==k.get(0));return{top:n,left:m}},_mousedown:function(n){var m=this;var l=this.s.dt;this.dom.start=this.dom.attachedTo;this.s.start={row:l.rows({page:"current"}).nodes().indexOf(g(this.dom.start).parent()[0]),column:g(this.dom.start).index()};g(a.body).on("mousemove.autoFill",function(o){m._mousemove(o)}).on("mouseup.autoFill",function(o){m._mouseup(o)});var i=this.dom.select;var k=g(l.table().node()).offsetParent();i.top.appendTo(k);i.left.appendTo(k);i.right.appendTo(k);i.bottom.appendTo(k);this._drawSelection(this.dom.start,n);this.dom.handle.css("display","none");var j=this.dom.dtScroll;this.s.scroll={windowHeight:g(e).height(),windowWidth:g(e).width(),dtTop:j?j.offset().top:null,dtLeft:j?j.offset().left:null,dtHeight:j?j.outerHeight():null,dtWidth:j?j.outerWidth():null}},_mousemove:function(l){var k=this;var j=this.s.dt;var i=l.target.nodeName.toLowerCase();if(i!=="td"&&i!=="th"){return}this._drawSelection(l.target,l);this._shiftScroll(l)},_mouseup:function(t){g(a.body).off(".autoFill");var r=this;var k=this.s.dt;var u=this.dom.select;u.top.remove();u.left.remove();u.right.remove();u.bottom.remove();this.dom.handle.css("display","block");var j=this.s.start;var n=this.s.end;if(j.row===n.row&&j.column===n.column){return}var q=k.cell(":eq("+j.row+")",j.column+":visible",{page:"current"});if(g("div.DTE",q.node()).length){var s=k.editor();s.on("submitSuccess.kt",function(){s.off(".kt");r._mouseup(t)}).on("submitComplete.kt preSubmitCancelled.kt",function(){s.off(".kt")});s.submit();return}var v=this._range(j.row,n.row);var m=this._range(j.column,n.column);var o=[];var l=k.settings()[0];var p=l.aoColumns;for(var i=0;i<v.length;i++){o.push(g.map(m,function(z){var w=k.cell(":eq("+v[i]+")",z+":visible",{page:"current"});var A=w.data();var y=w.index();var x=p[y.column].editField;if(x!==h){A=l.oApi._fnGetObjectDataFn(x)(k.row(y.row).data())}return{cell:w,data:A,label:w.data(),index:y}}))}this._actionSelector(o);clearInterval(this.s.scrollInterval);this.s.scrollInterval=null},_range:function(m,j){var k=[];var l;if(m<=j){for(l=m;l<=j;l++){k.push(l)}}else{for(l=m;l>=j;l--){k.push(l)}}return k},_shiftScroll:function(o){var n=this;var i=this.s.dt;var r=this.s.scroll;var q=false;var p=5;var k=65;var s=o.pageY-a.body.scrollTop,u=o.pageX-a.body.scrollLeft,j,t,l,m;if(s<k){j=p*-1}else{if(s>r.windowHeight-k){j=p}}if(u<k){t=p*-1}else{if(u>r.windowWidth-k){t=p}}if(r.dtTop!==null&&o.pageY<r.dtTop+k){l=p*-1}else{if(r.dtTop!==null&&o.pageY>r.dtTop+r.dtHeight-k){l=p}}if(r.dtLeft!==null&&o.pageX<r.dtLeft+k){m=p*-1}else{if(r.dtLeft!==null&&o.pageX>r.dtLeft+r.dtWidth-k){m=p}}if(j||t||l||m){r.windowVert=j;r.windowHoriz=t;r.dtVert=l;r.dtHoriz=m;q=true}else{if(this.s.scrollInterval){clearInterval(this.s.scrollInterval);this.s.scrollInterval=null}}if(!this.s.scrollInterval&&q){this.s.scrollInterval=setInterval(function(){if(r.windowVert){a.body.scrollTop+=r.windowVert}if(r.windowHoriz){a.body.scrollLeft+=r.windowHoriz}if(r.dtVert||r.dtHoriz){var v=n.dom.dtScroll[0];if(r.dtVert){v.scrollTop+=r.dtVert}if(r.dtHoriz){v.scrollLeft+=r.dtHoriz}}},20)}},_update:function(s,r){if(s===false){return}var l=this.s.dt;var p;this._emitEvent("preAutoFill",[l,r]);this._editor(r);var m=this.c.update!==null?this.c.update:this.c.editor?false:true;if(m){for(var o=0,q=r.length;o<q;o++){for(var n=0,k=r[o].length;n<k;n++){p=r[o][n];p.cell.data(p.set)}}l.draw(false)}this._emitEvent("autoFill",[l,r])}});d.actions={increment:{available:function(j,i){var k=i[0][0].label;return !isNaN(k-parseFloat(k))},option:function(j,i){return j.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(l,s,m){var p=s[0][0].data*1;var q=g("input",m).val()*1;for(var o=0,r=s.length;o<r;o++){for(var n=0,k=s[o].length;n<k;n++){s[o][n].set=p;p+=q}}}},fill:{available:function(j,i){return true},option:function(j,i){return j.i18n("autoFill.fill","Fill all cells with <i>"+i[0][0].label+"</i>")},execute:function(p,m,o){var q=m[0][0].data;for(var n=0,k=m.length;n<k;n++){for(var l=0,r=m[n].length;l<r;l++){m[n][l].set=q}}}},fillHorizontal:{available:function(j,i){return i.length>1&&i[0].length>1},option:function(j,i){return j.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(p,m,o){for(var n=0,k=m.length;n<k;n++){for(var l=0,q=m[n].length;l<q;l++){m[n][l].set=m[n][0].data}}}},fillVertical:{available:function(j,i){return i.length>1&&i[0].length>1},option:function(j,i){return j.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(p,m,o){for(var n=0,k=m.length;n<k;n++){for(var l=0,q=m[n].length;l<q;l++){m[n][l].set=m[0][l].data}}}},cancel:{available:function(){return false},option:function(i){return i.i18n("autoFill.cancel","Cancel")},execute:function(){return false}}};d.version="2.3.1";d.defaults={alwaysAsk:false,focus:null,columns:"",enable:true,update:null,editor:null,vertical:true,horizontal:true};d.classes={btn:"btn"};var b=g.fn.dataTable.Api;b.register("autoFill()",function(){return this});b.register("autoFill().enabled()",function(){var i=this.context[0];return i.autoFill?i.autoFill.enabled():false});b.register("autoFill().enable()",function(i){return this.iterator("table",function(j){if(j.autoFill){j.autoFill.enable(i)}})});b.register("autoFill().disable()",function(){return this.iterator("table",function(i){if(i.autoFill){i.autoFill.disable()}})});g(a).on("preInit.dt.autofill",function(m,j,i){if(m.namespace!=="dt"){return}var n=j.oInit.autoFill;var l=f.defaults.autoFill;if(n||l){var k=g.extend({},n,l);if(n!==false){new d(j,k)}}});f.AutoFill=d;f.AutoFill=d;return d}));